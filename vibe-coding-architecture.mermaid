graph TB
    subgraph DevEnv["ğŸ–¥ï¸ DEVELOPMENT ENVIRONMENT"]
        Cursor["ğŸ¯ Cursor IDE<br/>with Cursor Rules<br/>(guidelines.md)"]
        Git["ğŸ“¦ Git/GitHub<br/>(version control)"]
        Terminal["âŒ¨ï¸ Terminal<br/>npm/pnpm"]
    end

    subgraph FrontendArchitecture["âš›ï¸ FRONTEND ARCHITECTURE (React + TypeScript + Vite)"]
        subgraph ProjectRoot["ğŸ“ Project Root"]
            Docs["ğŸ“š Documentation<br/>â”œâ”€â”€ README.md<br/>â”œâ”€â”€ ARCHITECTURE.md<br/>â”œâ”€â”€ guidelines.md<br/>â””â”€â”€ .cursorrules"]
            Config["âš™ï¸ Configuration<br/>â”œâ”€â”€ vite.config.ts<br/>â”œâ”€â”€ tsconfig.json<br/>â”œâ”€â”€ eslint.config.js<br/>â””â”€â”€ tailwind.config.ts"]
        end

        subgraph SrcFolder["ğŸ“‚ src/"]
            subgraph Pages["ğŸ“„ pages/<br/>(Full page components)"]
                StudentPortal["StudentPortal.tsx"]
                TrainerDashboard["TrainerDashboard.tsx"]
                AdminPanel["AdminPanel.tsx"]
            end

            subgraph Components["ğŸ§© components/<br/>(Reusable UI)"]
                StudentComps["student/<br/>â”œâ”€â”€ PRDGenerator<br/>â”œâ”€â”€ CourseProgress<br/>â””â”€â”€ VideoPlayer"]
                TrainerComps["trainer/<br/>â”œâ”€â”€ SessionsTable<br/>â”œâ”€â”€ StudentsList<br/>â””â”€â”€ CertificateModal"]
                AdminComps["admin/<br/>â”œâ”€â”€ AnalyticsDashboard<br/>â”œâ”€â”€ UserManagement<br/>â””â”€â”€ InvoicesTable"]
                UIComps["ui/ (shadcn)<br/>â”œâ”€â”€ button.tsx<br/>â”œâ”€â”€ input.tsx<br/>â”œâ”€â”€ modal.tsx<br/>â””â”€â”€ card.tsx"]
            end

            subgraph ServiceLayer["ğŸª SERVICE LAYER"]
                subgraph Hooks["hooks/<br/>(Business Logic)"]
                    StudentHooks["student/<br/>â”œâ”€â”€ useStudentData<br/>â”œâ”€â”€ usePRDGeneration<br/>â””â”€â”€ useSessionAccess"]
                    TrainerHooks["trainer/<br/>â”œâ”€â”€ useTrainerSessions<br/>â”œâ”€â”€ useBilling<br/>â””â”€â”€ useCertification"]
                    AdminHooks["admin/<br/>â”œâ”€â”€ useAnalytics<br/>â”œâ”€â”€ useUserManagement<br/>â””â”€â”€ useReporting"]
                end

                subgraph Services["services/<br/>(Utilities)"]
                    AuthService["authService.ts<br/>(login, logout,<br/>JWT refresh)"]
                    ApiService["apiService.ts<br/>(centralized API<br/>calls)"]
                    UtilService["utils/<br/>â”œâ”€â”€ formatDate.ts<br/>â”œâ”€â”€ validateEmail.ts<br/>â””â”€â”€ calculateMetrics.ts"]
                end
            end

            subgraph Types["ğŸ“‹ types/<br/>(TypeScript)"]
                Database["database.types.ts<br/>(auto-generated)"]
                Custom["custom.types.ts<br/>(app-specific types)"]
            end

            subgraph State["ğŸ”„ State Management"]
                Context["contexts/<br/>â”œâ”€â”€ AuthContext.tsx<br/>â”œâ”€â”€ UserContext.tsx<br/>â””â”€â”€ AppContext.tsx"]
                Store["stores/ (optional)<br/>â”œâ”€â”€ userStore.ts<br/>â””â”€â”€ sessionStore.ts"]
            end

            Main["main.tsx<br/>(Entry point)"]
            App["App.tsx<br/>(Router + providers)"]
        end
    end

    subgraph BuildProcess["ğŸ”¨ BUILD & DEPLOYMENT"]
        Vite["Vite<br/>(Fast bundler)"]
        TypeCheck["TypeScript<br/>(Type checking)"]
        Lint["ESLint<br/>(Code quality)"]
        Build["npm run build<br/>(Generates dist/)"]
        Deploy["Vercel/Netlify<br/>(Static hosting)"]
    end

    subgraph Backend["ğŸ—„ï¸ BACKEND (Supabase)"]
        Auth["ğŸ” Authentication<br/>â”œâ”€â”€ Email/Password<br/>â”œâ”€â”€ OAuth<br/>â””â”€â”€ JWT tokens"]
        
        subgraph EdgeFunctions["âš¡ Edge Functions<br/>(Deno runtime)"]
            GeneratePRD["generate-prd.ts<br/>(OpenAI integration)"]
            GenerateFrontend["generate-frontend.ts<br/>(V0 integration)"]
            ProcessPayment["process-payment.ts<br/>(Stripe integration)"]
        end

        RLS["ğŸ”’ Row Level Security<br/>â”œâ”€â”€ Student RLS<br/>â”œâ”€â”€ Trainer RLS<br/>â””â”€â”€ Admin RLS"]
        
        subgraph Database["ğŸ—ƒï¸ PostgreSQL Database"]
            AuthTables["Auth Tables<br/>â”œâ”€â”€ auth.users<br/>â”œâ”€â”€ profiles<br/>â””â”€â”€ user_roles"]
            DataTables["Data Tables<br/>â”œâ”€â”€ students<br/>â”œâ”€â”€ trainers<br/>â”œâ”€â”€ sessions<br/>â””â”€â”€ posts"]
            LogTables["Log Tables<br/>â”œâ”€â”€ prd_access_log<br/>â”œâ”€â”€ audit_log<br/>â””â”€â”€ rate_limits"]
        end
    end

    subgraph ExternalServices["ğŸŒ EXTERNAL SERVICES"]
        OpenAI["ğŸ¤– OpenAI API<br/>(GPT-4o-mini)"]
        V0["ğŸ¨ V0.dev SDK<br/>(Frontend generation)"]
        Stripe["ğŸ’³ Stripe<br/>(Payments)"]
        SendGrid["ğŸ“§ SendGrid<br/>(Email)"]
        Analytics["ğŸ“Š Google Analytics<br/>(Tracking)"]
    end

    subgraph EnvVars["ğŸ”‘ ENVIRONMENT VARIABLES"]
        FrontendEnv["Frontend (.env.local)<br/>VITE_SUPABASE_URL<br/>VITE_SUPABASE_ANON_KEY"]
        BackendEnv["Backend (Edge Functions)<br/>OPENAI_API_KEY<br/>V0_API_KEY<br/>STRIPE_SECRET_KEY"]
    end

    %% Connections
    Cursor -->|writes code following| Docs
    Cursor -->|edits| SrcFolder
    Git -->|version control| ProjectRoot
    Terminal -->|runs dev/build| Vite
    
    Main -->|imports| App
    App -->|renders| Pages
    Pages -->|use| Components
    Components -->|call| Hooks
    Hooks -->|query via| Services
    Services -->|access| Types
    App -->|provides| State
    State -->|consumed by| Components
    
    Vite -->|bundles| TypeCheck
    TypeCheck -->|validates| Lint
    Lint -->|passes to| Build
    Build -->|outputs dist/| Deploy
    Deploy -->|hosts on CDN| DevEnv
    
    Services -->|makes requests to| Backend
    Hooks -->|authenticates via| Auth
    
    Auth -->|validates| RLS
    RLS -->|protects| Database
    
    Services -->|calls| EdgeFunctions
    EdgeFunctions -->|integrates with| ExternalServices
    
    OpenAI -->|powers| GeneratePRD
    V0 -->|powers| GenerateFrontend
    Stripe -->|powers| ProcessPayment
    SendGrid -->|sends| Auth
    Analytics -->|tracks| Components
    
    EdgeFunctions -->|reads/writes| Database
    Components -->|displays data from| Database
    
    BackendEnv -->|secrets for| EdgeFunctions
    FrontendEnv -->|environment| SrcFolder

    %% Styling
    classDef development fill:#e1f5ff,stroke:#01579b,stroke-width:2px,color:#000
    classDef frontend fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#000
    classDef backend fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px,color:#000
    classDef external fill:#fff3e0,stroke:#e65100,stroke-width:2px,color:#000
    classDef config fill:#fce4ec,stroke:#880e4f,stroke-width:2px,color:#000
    
    class DevEnv development
    class FrontendArchitecture,Pages,Components,ServiceLayer,Types,State,BuildProcess frontend
    class Backend,Auth,EdgeFunctions,Database,RLS backend
    class ExternalServices,Stripe,OpenAI,V0,SendGrid,Analytics external
    class ProjectRoot,Docs,Config,EnvVars config
